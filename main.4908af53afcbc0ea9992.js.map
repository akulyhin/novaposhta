{"version":3,"sources":["webpack:///./index.js"],"names":["search","document","querySelector","street","arr","addEventListener","debounce","e","$","ajax","type","dataType","url","data","JSON","stringify","modelName","calledMethod","methodProperties","CityName","target","value","Limit","apiKey","headers","xhrFields","withCredentials","success","texts","console","log","Addresses","result","availableTags","map","city","Ref","select","Present","available","autocomplete","source","cityRef","StreetName","SettlementRef","resultStreet"],"mappings":"+IAMMA,EAASC,SAASC,cAAc,SAChCC,EAASF,SAASC,cAAc,eAElCE,EAAM,GAGVJ,EAAOK,iBAAiB,QAASC,KAAS,SAACC,GACvCC,EAAEC,KAAK,CACHC,KAAM,OACNC,SAAU,OACVC,IAAK,uCACLC,KAAMC,KAAKC,UAAU,CACnBC,UAAW,UACXC,aAAc,oBACdC,iBAAkB,CAChBC,SAAUZ,EAAEa,OAAOC,MACnB,cAAiB,GACjBC,MAAO,IAETC,OAAQ,qCAEVC,QAAS,CACP,eAAgB,oBAElBC,UAAW,CACTC,iBAAiB,GAEnBC,QAAS,SAASC,GAEhBC,QAAQC,IAAIF,GACZxB,EAAMwB,EAAMf,KAAK,GAAGkB,UAIpBvB,GAAG,WACD,IACIwB,EASR,SAAoBC,EAAe7B,GACrBA,EAAI8B,KAAI,SAAAC,GAAI,OAAIA,EAAKC,OAAjC,IACQC,EAASjC,EAAI8B,KAAI,SAAAC,GAAI,OAAIA,EAAKG,WAIpC,OAHgBD,EAZHE,CADO,EACkBnC,GAGtCI,EAAG,SAAUgC,aAAa,CACxBC,OAAQT,YAgBnB,MAEHH,QAAQC,IAAI9B,EAAOqB,OAEnB,IAAIqB,EAAU,GAEd1C,EAAOK,iBAAiB,UAAU,WAEhCG,EAAEC,KAAK,CACLC,KAAM,OACNC,SAAU,OACVC,IAAK,uCACLC,KAAMC,KAAKC,UAAU,CACnBC,UAAW,UACXC,aAAc,oBACdC,iBAAkB,CAChBC,SAAUnB,EAAOqB,MACjBC,MAAO,IAETC,OAAQ,qCAEVC,QAAS,CACP,eAAgB,oBAElBC,UAAW,CACTC,iBAAiB,GAEnBC,QAAS,SAAkBC,GAIzB,OAFAc,EAAUd,EAAMf,KAAK,GAAGkB,UAAU,GAAGK,UAQ3CjC,EAAOE,iBAAiB,QAASC,KAAS,SAACC,GAGzCC,EAAEC,KAAK,CACHC,KAAM,OACNC,SAAU,OACVC,IAAK,uCACLC,KAAMC,KAAKC,UAAU,CACnBC,UAAW,UACXC,aAAc,0BACdC,iBAAkB,CAChByB,WAAYpC,EAAEa,OAAOC,MACrBuB,cAAeF,EACfpB,MAAO,IAETC,OAAQ,qCAEVC,QAAS,CACP,eAAgB,oBAElBC,UAAW,CACTC,iBAAiB,GAEnBC,QAAS,SAASC,GAGhBxB,EAAMwB,EAAMf,KAAK,GAAGkB,UAIpBvB,GAAG,WACD,IACIqC,EASR,SAAoBZ,EAAe7B,GAC/B,IAAMiC,EAASjC,EAAI8B,KAAI,SAAAC,GAAI,OAAIA,EAAKG,WAGpC,OAFgBD,EAXGE,CADC,EACwBnC,GAG5CI,EAAG,eAAgBgC,aAAa,CAC9BC,OAAQI,YAcjB,O","file":"main.4908af53afcbc0ea9992.js","sourcesContent":["import './sass/styles.scss';\r\nimport debounce from 'lodash.debounce';\r\nimport './js/searchQuery.js';\r\n\r\n\r\n\r\nconst search = document.querySelector('#tags');\r\nconst street = document.querySelector('#tagsStreet');\r\n\r\nlet arr = [];\r\nlet arrStreet = [];\r\n\r\nsearch.addEventListener('input', debounce((e) => {\r\n    $.ajax({\r\n        type: 'POST',\r\n        dataType: 'json',\r\n        url: 'https://api.novaposhta.ua/v2.0/json/',\r\n        data: JSON.stringify({\r\n          modelName: 'Address',\r\n          calledMethod: 'searchSettlements',\r\n          methodProperties: {\r\n            CityName: e.target.value,\r\n            \"SettlementRef\": '',\r\n            Limit: 10\r\n          },\r\n          apiKey: 'c1be1e4c0916d85cce43b88f2a0a9fd1'\r\n        }),\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        xhrFields: {\r\n          withCredentials: false \r\n        },\r\n        success: function(texts) {\r\n            \r\n          console.log(texts);\r\n          arr = texts.data[0].Addresses;\r\n          \r\n          // console.log(arr);\r\n\r\n          $( function() {\r\n            let availableTags = [];\r\n            let result = available(availableTags, arr);\r\n            // console.log(result)\r\n        \r\n            $( \"#tags\" ).autocomplete({\r\n              source: result\r\n            });\r\n        });\r\n        \r\n        \r\n        function available (availableTags, arr) {\r\n          const ref = arr.map(city => city.Ref);\r\n            const select = arr.map(city => city.Present);\r\n            availableTags = select;\r\n            // console.log(ref);\r\n            \r\n            return availableTags;\r\n        }\r\n        },\r\n      });\r\n\r\n}, 100));\r\n\r\nconsole.log(search.value);\r\n\r\nlet cityRef = '';\r\n\r\nsearch.addEventListener('change', () => {\r\n\r\n  $.ajax({\r\n    type: 'POST',\r\n    dataType: 'json',\r\n    url: 'https://api.novaposhta.ua/v2.0/json/',\r\n    data: JSON.stringify({\r\n      modelName: 'Address',\r\n      calledMethod: 'searchSettlements',\r\n      methodProperties: {\r\n        CityName: search.value,\r\n        Limit: 10\r\n      },\r\n      apiKey: 'c1be1e4c0916d85cce43b88f2a0a9fd1'\r\n    }),\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    xhrFields: {\r\n      withCredentials: false \r\n    },\r\n    success: function whatRef (texts) {\r\n        \r\n      cityRef = texts.data[0].Addresses[0].Ref;\r\n\r\n      return cityRef;\r\n    }\r\n  })\r\n})\r\n\r\n\r\nstreet.addEventListener('input', debounce((e) => {\r\n  // console.log(e.target.value);\r\n\r\n  $.ajax({\r\n      type: 'POST',\r\n      dataType: 'json',\r\n      url: 'https://api.novaposhta.ua/v2.0/json/',\r\n      data: JSON.stringify({\r\n        modelName: 'Address',\r\n        calledMethod: 'searchSettlementStreets',\r\n        methodProperties: {\r\n          StreetName: e.target.value,\r\n          SettlementRef: cityRef,\r\n          Limit: 10\r\n        },\r\n        apiKey: 'c1be1e4c0916d85cce43b88f2a0a9fd1'\r\n      }),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      xhrFields: {\r\n        withCredentials: false \r\n      },\r\n      success: function(texts) {\r\n          \r\n        // console.log(texts);\r\n        arr = texts.data[0].Addresses;\r\n        \r\n        // console.log(arr);\r\n\r\n        $( function() {\r\n          let availableTags = [];\r\n          let resultStreet = available(availableTags, arr);\r\n          // console.log(resultStreet)\r\n      \r\n          $( \"#tagsStreet\" ).autocomplete({\r\n            source: resultStreet\r\n          });\r\n      });\r\n      \r\n      \r\n      function available (availableTags, arr) {\r\n          const select = arr.map(city => city.Present);\r\n          availableTags = select;\r\n          \r\n          return availableTags;\r\n      }\r\n      },\r\n    });\r\n\r\n}, 100))"],"sourceRoot":""}